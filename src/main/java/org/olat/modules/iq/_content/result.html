<div id="o_qti_run" class="#if($qtistatus.isSurvey())o_qti_survey #else o_qti_test #end clearfix">
	<div id="o_qti_run_title" class="o_header_with_buttons">
		<h3>$qtistatus.getTitle()</h3>
		#if(!$qtistatus.isPreview())
		<div class="o_button_group o_button_group_right">
			$r.render("close")
		</div>
  		#end
  	</div>
  
	#if (!$qtistatus.isSurvey() && $displayScoreProgress)
 	<div id="o_qti_run_score">
		#if ($qtistatus.score)
		<div class="panel panel-default"><div class="panel-body">
			<div id="o_qti_run_scoreinfo" class="col-sm-3">
				#if ($qtistatus.hasMaxScore())
			    	#if ($qtistatus.maxScore == "-1.0")
			  			$r.translate("actualPoints"): $qtistatus.score / $r.translate("noMaxScore")&nbsp;
			    	#else
			  			$r.translate("actualPoints"): $qtistatus.score / $qtistatus.maxScore&nbsp;
			  		#end
				#else
					$r.translate("actualPoints"): $qtistatus.score&nbsp;
				#end
			</div>
			<div id="o_qti_run_scoreprogress" class="col-sm-3">
				$r.render("qtiscoreprogress", "nl")
			</div>
			#if ($qtistatus.getNumberOfNotRatedAnswers() >= 1)
				<div id="o_qti_number_of_not_rated_answers" class="col-sm-3">
				#if ($qtistatus.getNumberOfNotRatedAnswers() == 1)
					1 $r.translate("answer.not.rated")
				#else
					$qtistatus.getNumberOfNotRatedAnswers() $r.translate("answers.not.rated")
				#end
				</div>
			#end
		</div></div>
		#end
	</div>
	#end

	#if ($qtistatus.hasError())
		<div class="o_warning">$qtistatus.error</div>
	#end
	#if ($qtistatus.hasMessage())
		<div class="o_important">$qtistatus.message</div>	
	#end

	<div id="o_qti_run_main">
		#if ($displayMenu)
		<div id="o_qti_run_menu" class="col-md-4">		
			<div id="o_qti_run_menu_inner" class="o_floatbox">
				$r.render("qticomp", "menu")	
			</div>
		</div>
		#end
		<div id="o_qti_run_content" class="col-md-8">			
			<div id="o_qti_run_content_inner" class="o_floatscrollbox">
				#if ($displayreporting)
					<h3>$r.translate("DetailedResults")</h3>
					<div id="o_qti_results">
						$!resreporting
					</div>
			    #else				      
			      <h3>$!visibilityPeriod</h3>
				#end
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
/* <![CDATA[ */
function mark (it) {
	// do nothing
}

// LMSUZH-957 sanitize answers that are stored in QTI with double semicolons
var results = jQuery('#o_qti_run_content #o_qti_results table tbody tr td font');
for (var i = 0; i< results.length; i++) {
    var elem = jQuery(results[i]);
    var newValue = elem.html().replace(/;;/g, ';');
    elem.html(newValue);
}

/* ]]> */
</script>