<script type="text/javascript">
	/* <![CDATA[ */ 
function resize_${panelName}() {	
	var win = jQuery('#${panelName}');
	jQuery('.o_im_chat_history', win).each(function(index, el){
		jQuery(el).height(win.height() - 100);
		jQuery(el).scrollTop(el.scrollHeight);
	});
}
function tweak_${panelName}() {
	try {
		resize_${panelName}();
	} catch (e) { if(window.console) console.log(e) }
}
function focus_${panelName}() {
	try {
		resize_${panelName}();
		setTimeout(function(){ jQuery('#o_fioinput_${panelName}').focus(); }, 100);
	} catch (e) { if(window.console) console.log(e) }
}
/* ]]> */
</script>
<div class="o_im_chat">
	<div class="clearfix">
		#if (!$isAjaxMode)
			<div class="pull-right">$r.render("refresh")</div>
		#end
		<div class="o_im_load_history">
			<span class="o_label">
				$r.translate("chat.load.history")
			</span>
			<div class="btn-group btn-group-xs">
				$r.render("im.today")
				$r.render("im.lastweek") 
				$r.render("im.lastmonth")	
			</div>
		</div>
	</div>
	$r.render("chatMsgFieldPanel")
	<div class="o_im_chat_form">
		$r.render("sendMessageForm")
	</div>
</div>
